# 运行
依赖说明：
- Python 2&3 兼容，在2.7 & 3.6上测试通过
- 核心代码使用了datetime模块

```
$ cd Thoughtworkds_Homework
$ python run.py
```

- 测试用例1、2使用了与pdf一致的测试数据。
- 测试用例3检查了"取消预订的请求，必须与之前的预订请求严格匹配，需要匹配的项有⽤户ID"。
- 打印完测试用例结果之后，为标准输入测试。

输出参见：[output.txt](./test/output.txt)
>（为一次性输出多个测试结果，使用了额外的输出分割符）

也可参见分别输出：
- [output1.txt](./test/output1.txt)
- [output1.txt](./test/output2.txt)

# 实现思路
这次作业中，最关键在于数据结构的设计。

如何设计一个良好的数据结构来表示一个"订单"，以及某球馆在某时刻的状态，收入？这是我思考的核心。

使用Python充分利用其面向对象的特性，在数据结构方面则借鉴了C语言的位运算。设计如下数据结构：

### 订单：reserve
对于以下两条输入：
- 'U003 2017-08-01 18:00~20:00 A',
- 'U002 2017-08-01 19:00~22:00 A C',

暂不考虑用户id，我将时间和球馆的预定信息，编码为int类型。为讨论方便，用十六进制表示，并用下划线分割：
`0x_9_7e1_8_01_12_14`。下面具体解释各部分：
- 9 <=> 0b_1001, 其中高位1表示为预定（0表示取消）；低三位表示球馆编号（A到D分别对应1到4）。
- 7e1 <=> 2017，表示年份。使用一个半字节，最高可表示4095年。
- 8 <=> 8，表示月份。12个月用半个字节足够表示。
- 01 <=> 1, 表示月份中的第几天， 最大31， 一个字节足够。
- 12 <=> 18:00，由于题意说明分钟一定是0，因此0~23区间使用一个字节足够。
- 14 <=> 20:00，同上。

结合用户id，表示预定总表的数据结构如下：
```
reservation = {
    1: [
            { 0x_9_7e1_8_01_12_14: 'U003'},
            { 0x_9_7e1_8_01_11_14: 'U002'},
        ],
    2: [
        { 0x_9_7e1_8_01_12_14: 'U003'},
        { 0x_9_7e1_8_01_11_14: 'U002'},
    ],
    ...
}
```
其中1，2代表A、B球馆。该冗余设计是为查询统计方便。

另设计收入表：
```
income = {
    0x_9_7e1_8_01_12_13: 40,
    0x_9_7e1_8_01_12_14: 100,
    ...
}
```

